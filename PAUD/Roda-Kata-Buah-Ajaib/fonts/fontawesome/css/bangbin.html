<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAUD GEMBIRA</title>
	<link rel="icon" type="image/x-icon" href="image/favicon.ico">   
    <link rel="stylesheet" href="fonts/fontawesome/css/all.min.css">
    <style>
        :root {
            --white: #FFFFFF;
        }

		/* fredoka-regular - latin */
		@font-face {
		  font-display: swap; 
		  font-family: 'Fredoka';
		  font-style: normal;
		  font-weight: 400;
		  src: url('fonts/fredoka-v17-latin-regular.woff2') format('woff2'); 
		}
		/* fredoka-700 - latin */
		@font-face {
		  font-display: swap; 
		  font-family: 'Fredoka';
		  font-style: normal;
		  font-weight: 700;
		  src: url('fonts/fredoka-v17-latin-700.woff2') format('woff2'); 
		}

		/* inter-300 - latin */
		@font-face {
		  font-display: swap;
		  font-family: 'Inter';
		  font-style: normal;
		  font-weight: 300;
		  src: url('fonts/inter-v20-latin-300.woff2') format('woff2'); 
		}
		/* inter-regular - latin */
		@font-face {
		  font-display: swap; 
		  font-family: 'Inter';
		  font-style: normal;
		  font-weight: 400;
		  src: url('fonts/inter-v20-latin-regular.woff2') format('woff2'); 
		}
		/* inter-500 - latin */
		@font-face {
		  font-display: swap; 
		  font-family: 'Inter';
		  font-style: normal;
		  font-weight: 500;
		  src: url('fonts/inter-v20-latin-500.woff2') format('woff2'); 
		}
		/* inter-800 - latin */
		@font-face {
		  font-display: swap; 
		  font-family: 'Inter';
		  font-style: normal;
		  font-weight: 800;
		  src: url('fonts/inter-v20-latin-800.woff2') format('woff2'); 
		}

        body {
            text-align: center;
            /* PERBAIKAN 1: ... */
            font-family: 'Inter', sans-serif;
            padding: 20px;
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            -webkit-user-select: none;
            user-select: none;
            /* DIUBAH: Izinkan scroll vertikal, sembunyikan horizontal */
            overflow-y: auto;
            overflow-x: hidden; 
            background-color: #f0f0f0; 
        }

        /* PERBAIKAN 2: ... */
        /* PERBAIKAN 2: 
          Mengelompokkan semua elemen yang seharusnya menggunakan 'Fredoka' 
          ke dalam satu aturan CSS agar lebih efisien dan konsisten.
          Ini menggantikan 10 aturan 'font-family' terpisah di bawah.
        */
        h1, h2, .fruit-name,
        #animated-text-display, .letter, 
        .letter-box, .pustaka-kategori, 
        .match-item.word, #info-panel {
            font-family: 'Fredoka', cursive, sans-serif; 
        }


        canvas#wheel { 
            border-radius: 50%;
            border: 8px solid var(--white);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2), 0 0 0 10px rgba(255,255,255,0.1), 0 0 0 15px rgba(255,255,255,0.05);
            transition: all 0.5s ease;
            display: block; 
        }

        canvas#backgroundCanvas {
            position: fixed; 
            top: 0;
            left: 0;
            width: 100vw;   
            height: 100vh;  
            z-index: -1;    
            display: block; 
            background-color: #f0f0f0; 
        }

        h1 {
            /* DIHAPUS: font-family: 'Fredoka One', cursive; (Sudah dipindah ke atas) */
            font-size: clamp(4rem, 8vw, 8rem); 
            color: #d9534f;
            text-shadow:
                -4px -4px 0 var(--white),
                4px -4px 0 var(--white),
                -4px 4px 0 var(--white),
                4px 4px 0 var(--white),
                0 -4px 0 var(--white),
                0 4px 0 var(--white),
                -4px 0 0 var(--white),
                4px 0 0 var(--white),
                6px 6px 0 #000000;
            margin-bottom: 1rem;
        }

        h2 {
            /* DIHAPUS: font-family: 'Fredoka One', cursive; (Sudah dipindah ke atas) */
            color: black;
            font-size: 2.5rem; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 25px; 
        }

        
        /* DIUBAH: Aturan dipisah. Halaman Awal (#welcome-screen) dikembalikan ke 'center' */
        #welcome-screen {
            display: flex;
            flex-direction: column;
            justify-content: center; /* KEMBALI KE CENTER */
            align-items: center;
            width: 100%;
            height: 100%; /* KEMBALI KE 100% */
        }
        
        /* Halaman Kenali Buah (#fruit-intro-screen) tetap 'flex-start' agar tidak terpotong */
        #fruit-intro-screen {
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* TETAP flex-start */
            align-items: center;
            width: 100%;
            min-height: 100vh; 
            padding-top: 2vh;
            box-sizing: border-box;
        }
        .welcome-title-group {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            padding-left: 20px;
            padding-right: 10px;
            box-sizing: border-box;
        }

        .welcome-image {
            position: absolute;
            z-index: -1;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            max-width: 500px;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(3px 3px 2px rgba(0,0,0,0.3));
        }

        #welcome-screen .welcome-title-group h1 {
            font-size: clamp(3.5rem, 6vw, 5rem); 
            margin-bottom: 0;
        }

        #welcome-screen p {
            font-size: 1.5rem; 
            color: #34495e;
            margin-top: -10px;
            margin-bottom: 40px;
        }
        .welcome-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px; 
            margin-top: 25px;
        }
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            animation: bubble-float 15s infinite ease-in-out;
            opacity: 0;
        }
        .bubble:nth-child(1) { width: 60px; height: 60px; left: 10%; animation-duration: 12s; animation-delay: 0s; }
        .bubble:nth-child(2) { width: 80px; height: 80px; left: 30%; animation-duration: 15s; animation-delay: 2s; }
        .bubble:nth-child(3) { width: 280px; height: 280px; left: 50%; animation-duration: 10s; animation-delay: 1s; }
        .bubble:nth-child(4) { width: 70px; height: 70px; left: 70%; animation-duration: 13s; animation-delay: 3s; }
        .bubble:nth-child(5) { width: 300px; height: 300px; left: 90%; animation-duration: 16s; animation-delay: 4s; }
        .bubble:nth-child(6) { width: 65px; height: 65px; left: 20%; animation-duration: 11s; animation-delay: 0.5s; }
        .bubble:nth-child(7) { width: 75px; height: 75px; left: 45%; animation-duration: 14s; animation-delay: 2.5s; }

        @keyframes bubble-float {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-10vh) scale(1.2); opacity: 0; }
        }

        .welcome-btn, #startButton, #continueToGameBtn {
            padding: 15px 30px; 
            font-size: 1.4rem; 
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.2s ease-out;
            font-weight: bold;
        }
        #startButton, #continueToGameBtn {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            padding: 20px 50px; 
            font-size: 1.8rem; 
            text-transform: uppercase;
            /* DITAMBAHKAN: Margin agar tombol tidak terpotong di bawah */
            margin-bottom: 20px;
            margin-top: 10px;
        }
        .welcome-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
        }
        #startButton:hover, .welcome-btn:hover, #continueToGameBtn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.25);
        }

        #fruit-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px; 
            margin: 25px 0;
            max-width: 900px; 
        }
        .fruit-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            padding: 20px; 
            width: 150px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            backdrop-filter: blur(5px);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .fruit-card:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .fruit-emoji {
            font-size: 80px; 
            cursor: pointer;
        }
        .fruit-name {
            margin-top: 15px;
            /* DIHAPUS: font-family: 'Fredoka One', cursive; (Sudah dipindah ke atas) */
            font-size: 1.8rem; 
            color: #34495e;
        }
        .benefit-icon-container {
            margin-top: 15px;
            font-size: 36px; 
            color: #3498db;
            cursor: pointer;
        }

        .intro-text-container {
            background: rgba(255, 255, 255, 0.7);
            padding: 20px 40px; 
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            backdrop-filter: blur(5px);
            margin-bottom: 25px;
            /* DITAMBAHKAN: Margin atas agar tidak menempel */
            margin-top: 15px;
        }
        #fruit-intro-screen h2 {
            margin-top: 5px;
            margin-bottom: 10px; 
        }
        #fruit-intro-screen p {
            margin-top: 5px;
            margin-bottom: 5px;
            font-size: 1.3rem; 
        }
       
        #game-container {
            display: none; 
            flex-direction: column;
            /* DIUBAH: dari 'center' ke 'flex-start' agar wheel tidak terpotong */
            justify-content: flex-start;
            align-items: center;
            width: 100%;
            /* DITAMBAHKAN: Padding atas dan box-sizing */
            padding-top: 1vh;
            box-sizing: border-box;
        }
        
        /* DITAMBAHKAN: Aturan baru untuk H1 di dalam game container */
        #game-container h1 {
            font-size: clamp(2.5rem, 5vw, 4rem); /* Kecilkan H1 */
            margin-top: 0;
            margin-bottom: 0.5rem; /* Kurangi margin */
        }

        
        .wheel-container {
            position: relative; display: inline-block; perspective: 1000px; 
            /* DIUBAH: Kurangi margin atas agar wheel naik */
            margin: 10px 0;
        }
        .pointer {
            position: absolute; top: -30px;  left: 50%; transform: translateX(-50%);
            width: 50px; height: 70px;  background: #e74c3c; clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10; box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
        }
        #spinBtn {
            margin-top: 40px; padding: 20px 50px; font-size: 24px;  background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white; border: none; border-radius: 50px; cursor: pointer;
            box-shadow: 0 8px 15px rgba(46, 204, 113, 0.3); transition: all 0.2s ease-out;
            font-weight: bold; letter-spacing: 1px; text-transform: uppercase;
        }
        #spinBtn:hover { transform: translateY(-4px); box-shadow: 0 12px 20px rgba(46, 204, 113, 0.4); }

        #animated-text-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            /* DIHAPUS: font-family: 'Fredoka One', cursive; (Sudah dipindah ke atas) */
            font-size: 6rem;
            font-weight: bold;
            color: white;
            text-shadow: 
                -3px -3px 0 #000,  
                 3px -3px 0 #000,
                -3px  3px 0 #000,
                 3px  3px 0 #000,
                 4px 4px 5px rgba(0,0,0,0.5);
            z-index: 20;
            pointer-events: none;
            letter-spacing: 0.5rem;
        }

        
        .modal {
            display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.7); backdrop-filter: blur(5px); animation: fadeIn 0.3s ease;
            align-items: center; justify-content: center;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal-content {
            margin: auto; padding: 40px;  border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); width: 90%; max-width: 950px; 
            position: relative;
        }
        #myModal .modal-content {
            background: linear-gradient(to bottom, #87CEEB, #E0F6FF);
            height: 90vh; 
            display: flex; flex-direction: column;
        }
        .info-modal .modal-content {
            background: linear-gradient(to bottom, #ffffff, #eef2f3); color: #333; text-align: left;
            font-size: 1.3rem; 
        }
        .info-modal h2 { text-align: center; color: #2c3e50; margin-top: 0; font-size: 2rem;  }
        
        
        .petunjuk-list {
            list-style-type: none;
            padding: 0;
        }
        .petunjuk-item {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        .petunjuk-icon {
            font-size: 3rem;
            cursor: pointer;
            transition: transform 0.2s ease;
            user-select: none;
        }
        .petunjuk-icon:hover {
            transform: scale(1.2) rotate(10deg);
        }
        .petunjuk-item p {
            margin: 0;
            text-align: left;
            flex-grow: 1;
        }
        
        
        .pustaka-kategori {
            /* DIHAPUS: font-family: 'Fredoka One', cursive; (Sudah dipindah ke atas) */
            font-size: 1.6rem;
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            border-bottom: 2px solid #bdc3c7;
            padding-bottom: 8px;
            text-align: left;
        }
        .pustaka-list {
            list-style: none;
            padding: 0;
            text-align: left;
        }
        .pustaka-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        .pustaka-icon {
            font-size: 2rem;
            width: 40px;
            text-align: center;
            color: #3498db;
        }
        .pustaka-item a {
            color: #2980b9;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.2s;
        }
        .pustaka-item a:hover {
            color: #e67e22;
            text-decoration: underline;
        }
        
        .close {
            color: #aaa; font-size: 42px;  font-weight: bold; cursor: pointer; transition: all 0.2s ease;
            position: absolute; top: 15px; right: 25px; z-index: 20;
        }
        .close:hover, .close:focus { color: #e74c3c; transform: rotate(90deg) scale(1.2); }

        
        #game-area { flex-grow: 1; position: relative; width: 100%; overflow: hidden; padding-top: 20px; box-sizing: border-box; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #current-object-image { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); opacity: 0.6; z-index: 1; }
        .letter { 
            position: absolute; 
            /* DIHAPUS: font-family: 'Fredoka One', cursive, sans-serif; (Sudah dipindah ke atas) */
            font-size: 3em;  
            color: #2980b9; 
            background-color: white; 
            padding: 15px; 
            width: 60px; 
            height: 60px;  
            display: flex; 
            justify-content: center; 
            align-items: center; 
            border-radius: 15px;  
            box-shadow: 0 6px 0 #bdc3c7;  
            cursor: pointer; 
            user-select: none; 
            animation: fall linear; 
            z-index: 10; 
        }
        @keyframes fall { from { top: -80px; } to { top: 105%; } } 
        #word-display-area { display: flex; gap: 15px;  justify-content: center; padding: 25px 0; }
        .letter-box { 
            width: 70px; 
            height: 80px;  
            background-color: rgba(255, 255, 255, 0.7); 
            border-bottom: 6px solid #bdc3c7;  
            border-radius: 15px;  
            display: flex; 
            justify-content: center; 
            align-items: center; 
            /* DIHAPUS: font-family: 'Fredoka One', cursive, sans-serif; (Sudah dipindah ke atas) */
            font-size: 3.5em;  
            color: #2c3e50; 
        }

        
        .matching-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            max-width: 800px; 
            margin: 25px 0;
        }
        .word-column, .image-column {
            display: flex;
            flex-direction: column;
            gap: 30px; 
        }
        .match-item {
            background: white;
            border-radius: 20px; 
            box-shadow: 0 5px 12px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.2s ease-out;
            user-select: none;
            border: 4px solid transparent; 
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .match-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 18px rgba(0,0,0,0.15);
        }
        .match-item.word {
            width: 200px; 
            height: 80px; 
            /* DIHAPUS: font-family: 'Fredoka One', cursive; (Sudah dipindah ke atas) */
            font-size: 2rem; 
            color: #2c3e50;
        }
        .match-item.image {
            width: 100px; 
            height: 100px; 
            font-size: 5rem; 
        }
        .match-item.selected {
            border-color: #3498db;
            background-color: #eaf5ff;
            transform: scale(1.05);
        }
        .match-item.correct-pair {
            background-color: #2ecc71;
            color: white;
            opacity: 0.7;
            pointer-events: none;
            transform: scale(1);
            border-color: #27ae60;
        }
        .match-item.incorrect-pair {
            animation: shake 0.5s ease-in-out;
            background-color: #e74c3c;
            border-color: #c0392b;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        #info-panel { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 15px 25px;  
            /* DIHAPUS: font-family: 'Fredoka One', cursive, sans-serif; (Sudah dipindah ke atas) */
            color: #2c3e50; 
        }
        #round-display, #lives-display { font-size: 2rem;  }
        .timer { font-size: 2rem;  }
        .timer-progress { height: 10px;  background: linear-gradient(90deg, #2ecc71, #f39c12, #e74c3c); border-radius: 10px; transition: width 1s linear; width: 100%; }
        .timer.flash { animation: flash 0.5s infinite alternate; }
        @keyframes flash { from { color: #2c3e50; } to { color: #e74c3c; } }
        .confetti { position: fixed; width: 15px; height: 15px; background-color: #f00; animation: confetti-fall 3s linear forwards; z-index: 9999; pointer-events: none; }
        @keyframes confetti-fall { to { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        .alert-message { text-align: center; font-size: 1.5rem;  font-weight: bold; padding: 15px; color: #2c3e50; min-height: 35px;  }
        .custom-alert-overlay { visibility: hidden; opacity: 0; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); z-index: 9998; display: flex; justify-content: center; align-items: center; transition: visibility 0s 0.3s, opacity 0.3s ease; }
        .custom-alert-overlay.show { visibility: visible; opacity: 1; transition: opacity 0.3s ease; }
        .custom-alert-box { color: white; padding: 35px 45px;  border-radius: 20px; text-align: center; font-size: 1.8rem;  font-weight: bold; box-shadow: 0 10px 30px rgba(0,0,0,0.3); max-width: 80%; transform: scale(0.7); transition: transform 0.3s ease-out; line-height: 1.6; }
        .custom-alert-box.success { background: linear-gradient(135deg, #2ecc71, #28b463); }
        .custom-alert-box.failure { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .custom-alert-box.info { background: linear-gradient(135deg, #3498db, #2980b9); }
        .custom-alert-overlay.show .custom-alert-box { transform: scale(1); }

        
        .memory-game-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px; 
            perspective: 1000px;
        }
        .memory-card {
            width: 120px; 
            height: 120px; 
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .memory-card.flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 15px; 
            box-shadow: 0 5px 12px rgba(0,0,0,0.1);
            font-size: 60px; 
        }
        .card-front {
            background: linear-gradient(135deg, #f39c12, #f1c40f);
            color: white;
            /* DITAMBAHKAN: Transisi untuk perubahan warna */
            transition: background 0.3s, color 0.3s;
        }
        .card-back {
            background: white;
            transform: rotateY(180deg);
            color: #2c3e50;
        }
        .memory-card.matched {
            /* DIUBAH: Jangan berputar, tetap di depan */
            transform: rotateY(0deg); 
            pointer-events: none;
            opacity: 0.9; /* Dibuat sedikit lebih jelas */
        }
        
        .memory-card.matched .card-back {
            /* Aturan ini tidak lagi relevan, tapi biarkan saja */
            color: #2ecc71; 
            font-size: 70px; 
            background: white; 
        }

        /* DITAMBAHKAN: Style untuk 'depan' kartu yg cocok (ceklist hijau) */
        .memory-card.matched .card-front {
            background: #2ecc71;
            color: white;
            font-size: 70px;
        }
		
        
        .profile-pic-container {
            perspective: 1000px;
            border-radius: 50%;
            flex-shrink: 0;
            margin-right: 20px;
            overflow: hidden;
        }

        .profile-pic-container img {
            transition: transform 0.2s ease-out;
            width: 150px;
            height: 300px;
            object-fit: cover;
            display: block;
        }

        
        #pengembangModal .fab {
            transition: transform 0.3s ease, color 0.3s ease;
        }

        #pengembangModal .fab:hover {
            color: #F1C40F;
            animation: icon-wobble 0.6s ease-in-out;
        }

        @keyframes icon-wobble {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-15deg) scale(1.1); }
            50% { transform: rotate(10deg) scale(1.1); }
            75% { transform: rotate(-5deg) scale(1.1); }
            100% { transform: rotate(0deg) scale(1); }
        }
        .modal-bg-image {
            position: absolute;
            right: 10px;
            top: 0;
            height: 100%;
            opacity: 0.15;
            pointer-events: none;
            z-index: 1;
        }

        .modal-main-content {
            position: relative;
            z-index: 2;
            display: flex;
            align-items: center;
            width: 100%;
        }

        .hc-logos {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .hc-logo {
            height: 60px;
            max-width: 150px;
            object-fit: contain;
        }
        
        
        .music-toggle-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.7);
            border: 2px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            color: #3498db;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .music-toggle-btn:hover {
            transform: scale(1.1);
            background-color: #3498db;
            color: white;
        }

    </style>
</head>
<body>
    <canvas id="backgroundCanvas"></canvas>
    
    
    <button id="musicToggleBtn" class="music-toggle-btn">
        <i class="fas fa-volume-up"></i>
    </button>
    
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>
    <div class="bubble"></div>

    <div id="welcome-screen">
        <div class="welcome-title-group">
            <img src="image/Bangbin.png" alt="bangbin" class="welcome-image">
            <h1>Roda Kata Buah Ajaib</h1>
        </div>
        <button id="startButton">Mulai Bermain</button>
        <div class="welcome-buttons">
            <button id="petunjukBtn" class="welcome-btn">Petunjuk</button>
            <button id="tujuanBtn" class="welcome-btn">Tujuan</button>
            <button id="pustakaBtn" class="welcome-btn">Pustaka</button>
            <button id="hcBtn" class="welcome-btn">Hak Cipta</button>
            <button id="pengembangBtn" class="welcome-btn">Pengembang</button>
        </div>
    </div>

    <div id="fruit-intro-screen" style="display:none;">
        <div class="intro-text-container">
            <h2>Kenali Buah & Sayur</h2>
            <p>Klik gambar buah untuk mendengar nama buah dan klik gambar logo untuk mendengarkan manfaatnya!</p>
			<p>Ingat selalu buah dengan logo nya agar kamu sukses menyelesaikan permainan!</p>
        </div>
        <div id="fruit-grid"></div>
        <button id="continueToGameBtn">Lanjut Bermain</button>
    </div>

    <div id="game-container">
        <h1>Roda Kata Buah Ajaib</h1>
        <div class="wheel-container">
            <div id="animated-text-display"></div>
            <div class="pointer"></div>
            <button id="spinBtn">Putar Roda</button>
            <canvas id="wheel" width="500" height="500"></canvas> 
        </div>
    </div>

    <div id="petunjukModal" class="modal info-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Petunjuk Permainan</h2>
            <div class="petunjuk-list">
                <div class="petunjuk-item">
                    <span class="petunjuk-icon" data-sound="sound-tutor1">🍎</span>
                    <p>Klik tombol "Mulai Bermain" untuk masuk ke permainan.</p>
                </div>
                <div class="petunjuk-item">
                    <span class="petunjuk-icon" data-sound="sound-tutor2">🍌</span>
                    <p>Di halaman pengenalan, klik setiap buah dan ikon manfaatnya untuk mendengar suara, lalu klik "Lanjut Bermain".</p>
                </div>
                <div class="petunjuk-item">
                    <span class="petunjuk-icon" data-sound="sound-tutor3">🥕</span>
                    <p>Klik tombol "Putar Roda" untuk memulai permainan dari Babak 1.</p>
                </div>
                <div class="petunjuk-item">
                    <span class="petunjuk-icon" data-sound="sound-tutor4">🍊</span>
                    <p><b>Babak 1 (Menangkap Huruf):</b> Susun kata berdasarkan gambar buah/sayur yang muncul.</p>
                </div>
                <div class="petunjuk-item">
                    <span class="petunjuk-icon" data-sound="sound-tutor5">🍅</span>
                    <p><b>Babak 2 (Menjodohkan):</b> Jodohkan 4 kata dengan 4 gambar yang sesuai.</p>
                </div>
                <div class="petunjuk-item">
                    <span class="petunjuk-icon" data-sound="sound-tutor6">🍇</span>
                    <p><b>Babak 3 (Memory Game):</b> Jodohkan buah dengan ikon manfaatnya yang sesuai.</p>
                </div>
                 <div class="petunjuk-item">
                    <span class="petunjuk-icon" data-sound="sound-tutor7">🏆</span>
                    <p>Selesaikan semua babak untuk menamatkan permainan. Selamat bermain!</p>
                </div>
            </div>
        </div>
    </div>

<div id="tujuanModal" class="modal info-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Tema dan Tujuan Pembelajaran</h2>

            <table style="text-align: left; width: 100%; border-spacing: 0 5px;">
                <tbody>
                    <tr>
                        <td style="width: 100px;"><b>Tema</b></td>
                        <td style="width: 15px;">:</td>
                        <td>Mahluk Ciptaan Tuhan.</td>
                    </tr>
                    <tr>
                        <td><b>Sub Tema</b></td>
                        <td>:</td>
                        <td>Tumbuhan.</td>
                    </tr>
                    <tr>
                        <td><b>Materi</b></td>
                        <td>:</td>
                        <td>Buah Kaya Vitamin.</td>
                    </tr>
                </tbody>
            </table>
            
            <p style="margin-top: 20px;">Permainan ini dirancang untuk membantu pemain, khususnya anak-anak, dalam mencapai tujuan berikut:</p>
            <ul>
                <li>Meningkatkan kemampuan mengenal dan menyusun huruf menjadi nama buah dan sayur.</li>
                <li>Mengembangkan kemampuan observasi dan pencarian visual (visual scanning).</li>
                <li>Menjadikan proses belajar kosakata lebih menyenangkan dan interaktif.</li>
            </ul>
        </div>
    </div>

<div id="pustakaModal" class="modal info-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Pustaka Media</h2>
            <p style="text-align:center; margin-bottom: 20px;">Permainan edukasi ini dibuat menggunakan berbagai sumber daya berkualitas tinggi dari situs-situs berikut:</p>
            
            <div class="pustaka-kategori">
                <i class="fas fa-book-medical"></i> Informasi Kesehatan & Manfaat Buah
            </div>
            <ul class="pustaka-list">
                <li class="pustaka-item">
                    <span class="pustaka-icon"><i class="fas fa-heartbeat"></i></span>
                    <div><a href="#" target="_blank">Healthline</a> - Referensi data nutrisi dan manfaat spesifik dari setiap buah yang ditampilkan dalam permainan.</div>
                </li>
                <li class="pustaka-item">
                    <span class="pustaka-icon"><i class="fas fa-stethoscope"></i></span>
                    <div><a href="#" target="_blank">WebMD</a> - Sumber informasi medis kredibel yang digunakan untuk validasi fakta-fakta kesehatan.</div>
                </li>
            </ul>

            <div class="pustaka-kategori">
                <i class="fas fa-paint-brush"></i> Aset Visual
            </div>
             <ul class="pustaka-list">
                <li class="pustaka-item">
                    <span class="pustaka-icon"><i class="fas fa-font"></i></span>
                    <div><a href="#" target="_blank">Google Fonts</a> - Menyediakan jenis huruf (font) 'Fredoka One' dan 'Inter' yang mudah dibaca dan menarik.</div>
                </li>
                <li class="pustaka-item">
                    <span class="pustaka-icon"><i class="fas fa-icons"></i></span>
                    <div><a href="#" target="_blank">Font Awesome</a> - Sumber untuk semua ikon interaktif, seperti ikon manfaat (hati, mata, otak) dan ikon navigasi.</div>
                </li>
                <li class="pustaka-item">
                    <span class="pustaka-icon"><i class="fas fa-robot"></i></span>
                    <div><a href="#" target="_blank">Gemini AI</a> - Digunakan untuk menghasilkan beberapa aset gambar dan karakter pendukung dalam permainan.</div>
                </li>
            </ul>

             <div class="pustaka-kategori">
                <i class="fas fa-volume-up"></i> Aset Audio
            </div>
             <ul class="pustaka-list">
                <li class="pustaka-item">
                    <span class="pustaka-icon"><i class="fas fa-music"></i></span>
                    <div><a href="https://pixabay.com/id/sound-effects" target="_blank">Pixabay</a> - Sumber musik latar ("Big Beat New") yang ceria untuk menemani sesi bermain.</div>
                </li>
                 <li class="pustaka-item">
                    <span class="pustaka-icon"><i class="fas fa-microphone-alt"></i></span>
                     <div><a href="#" target="_blank">ElevenLabs</a> - Teknologi AI Text-to-Speech untuk menghasilkan suara narasi pada petunjuk, nama buah, dan manfaatnya.</div>
                </li>
                 <li class="pustaka-item">
                    <span class="pustaka-icon"><i class="fas fa-compact-disc"></i></span>
                     <div><a href="#" target="_blank">MyInstants</a> - Menyediakan efek suara interaktif seperti suara putaran roda dan jawaban benar/salah.</div>
                </li>
            </ul>
        </div>
    </div>


    <div id="hcModal" class="modal info-modal">
        <div class="modal-content" style="text-align: center; background: linear-gradient(to bottom, #e8f5e9, #ffffff);">
            <span class="close">&times;</span>
            <img src="image/favicon.ico" alt="Logo Kemdikbud" class="hc-logo" style="height: 100px; margin-bottom: 20px;">
            <p style="margin: 2px 0; font-size: 0.9em;">Hak Cipta Milik Direktorat Pendidikan Anak Usia Dini,</p>
            <p style="margin: 2px 0; font-size: 0.9em;">Direktorat Jenderal Pendidikan Anak Usia Dini, Pendidikan Dasar, dan Pendidikan Menengah</p>
            <p style="margin: 2px 0; font-size: 0.9em;">Kementerian Pendidikan Dasar dan Menengah</p>
            <p style="margin-top: 15px;">Tahun 2025</p>
            <div class="hc-logos" style="padding-top: 15px; border-top: 1px solid #eee; margin-top: 20px;">
                <img src="image/logo-bermutu.png" alt="Logo Pendidikan Bermutu" class="hc-logo" style="height: 50px;">
                <img src="image/logo-ramah.png" alt="Logo RAMAH" class="hc-logo" style="height: 50px;">
                <img src="image/logo-paudpedia.png" alt="Logo PAUDPEDIA" class="hc-logo" style="height: 50px;">
            </div>
        </div>
    </div>

    <div id="pengembangModal" class="modal">
        <div class="modal-content" style="background: linear-gradient(135deg, #4e54c8, #8f94fb); max-width: 850px; padding: 25px;">
            <span class="close">×</span>
            <div class="modal-main-content">
                <img src="image/Bangbin2.png" alt="Background" class="modal-bg-image">
                <div class="profile-pic-container">
                    <img src="image/bangbin.gif" alt="Foto Profil">
                </div>

                <div style="color: white; text-align: left; flex-grow: 1;">
                    <h2 style="margin: 0; font-size: 1.5em;">BINTANG ADHI PERMANA</h2>
                    <p style="margin: 5px 0; font-size: 0.9em;">Guru, Konten Kreator, Analis Data, Pengembang Kurikulum</p>
                    <p style="margin: 10px 0 5px 0; font-weight: bold; font-size: 0.9em;">Kontak:</p>
                    <div style="font-size: 1.8em;">
                        <a href="https://www.facebook.com/bintang.a.permana/" target="_blank" style="margin-right: 15px; color: blue; text-decoration: none;"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.youtube.com/@Bangbin_1" target="_blank" style="margin-right: 15px; color: red; text-decoration: none;"><i class="fab fa-youtube"></i></a>
                        <a href="https://wa.me/6281310051985" target="_blank" style="color: green; text-decoration: none;"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="info-panel">
                <div id="round-display"></div>
                <div id="lives-display"></div>
                <div style="text-align: right;">
                    <div class="timer" id="timer"></div>
                    <div class="timer-progress" id="timerProgress"></div>
                </div>
            </div>
            <div id="game-area"></div>
            <div id="word-display-area"></div>
            <div id="alertMessage" class="alert-message"></div>
        </div>
    </div>

    <div id="transition-alert" class="custom-alert-overlay">
        <div class="custom-alert-box" id="transition-alert-content"></div>
    </div>

    
    <audio id="backgroundMusic" src="sound/big-beat-new-67544.mp3" loop preload="auto"></audio>

    
    <audio id="spinSound" src="sound/woodpecker.ogg" preload="auto"></audio>
    <audio id="tickSound" src="sound/alarm_QenbR8T.mp3" preload="auto"></audio>
    <audio id="successSound" src="sound/yeay-childrens.mp3" preload="auto"></audio>
    <audio id="timeoutSound" src="sound/alarm_clock.ogg" preload="auto"></audio>
    <audio id="wrongSound" src="sound/sonic-3-wrong-right.mp3" preload="auto"></audio>
    <audio id="foundSound" src="sound/pokemon-red_blue_yellow-item-found-sound-effect.mp3" preload="auto"></audio>
	<audio id="pairSound" src="sound/aquagen-partyalarm-party-mix-mp3.mp3" preload="auto"></audio>

    
    <audio id="sound-tutor1" src="sound/Tutor1.mp3" preload="auto"></audio>
    <audio id="sound-tutor2" src="sound/Tutor2.mp3" preload="auto"></audio>
    <audio id="sound-tutor3" src="sound/Tutor3.mp3" preload="auto"></audio>
    <audio id="sound-tutor4" src="sound/Tutor4.mp3" preload="auto"></audio>
    <audio id="sound-tutor5" src="sound/Tutor5.mp3" preload="auto"></audio>
    <audio id="sound-tutor6" src="sound/Tutor6.mp3" preload="auto"></audio>
    <audio id="sound-tutor7" src="sound/Tutor7.mp3" preload="auto"></audio>

    
    <audio id="sound-apel" src="sound/APEL.mp3" preload="auto"></audio>
    <audio id="sound-pisang" src="sound/PISANG.mp3" preload="auto"></audio>
    <audio id="sound-wortel" src="sound/WORTEL.mp3" preload="auto"></audio>
    <audio id="sound-jeruk" src="sound/JERUK.mp3" preload="auto"></audio>
    <audio id="sound-tomat" src="sound/TOMAT.mp3" preload="auto"></audio>
    <audio id="sound-anggur" src="sound/ANGGUR.mp3" preload="auto"></audio>

    
    <audio id="sound-manfaat_apel" src="sound/MAPEL.mp3" preload="auto"></audio>
    <audio id="sound-manfaat_pisang" src="sound/MPISANG.mp3" preload="auto"></audio>
    <audio id="sound-manfaat_wortel" src="sound/MWORTEL.mp3" preload="auto"></audio>
    <audio id="sound-manfaat_jeruk" src="sound/MJERUK.mp3" preload="auto"></audio>
    <audio id="sound-manfaat_tomat" src="sound/MTOMAT.mp3" preload="auto"></audio>
    <audio id="sound-manfaat_anggur" src="sound/MANGGUR.mp3" preload="auto"></audio>

    
    <audio id="sound-a" src="sound/A.mp3" preload="auto"></audio>
    <audio id="sound-b" src="sound/B.mp3" preload="auto"></audio>
    <audio id="sound-c" src="sound/C.mp3" preload="auto"></audio>
    <audio id="sound-d" src="sound/D.mp3" preload="auto"></audio>
    <audio id="sound-e" src="sound/E.mp3" preload="auto"></audio>
    <audio id="sound-f" src="sound/F.mp3" preload="auto"></audio>
    <audio id="sound-g" src="sound/G.mp3" preload="auto"></audio>
    <audio id="sound-h" src="sound/H.mp3" preload="auto"></audio>
    <audio id="sound-i" src="sound/I.mp3" preload="auto"></audio>
    <audio id="sound-j" src="sound/j.mp3" preload="auto"></audio>
    <audio id="sound-k" src="sound/K.mp3" preload="auto"></audio>
    <audio id="sound-l" src="sound/L.mp3" preload="auto"></audio>
    <audio id="sound-m" src="sound/M.mp3" preload="auto"></audio>
    <audio id="sound-n" src="sound/N.mp3" preload="auto"></audio>
    <audio id="sound-o" src="sound/O.mp3" preload="auto"></audio>
    <audio id="sound-p" src="sound/P.mp3" preload="auto"></audio>
    <audio id="sound-q" src="sound/Q.mp3" preload="auto"></audio>
    <audio id="sound-r" src="sound/R.mp3" preload="auto"></audio>
    <audio id="sound-s" src="sound/S.mp3" preload="auto"></audio>
    <audio id="sound-t" src="sound/T.mp3" preload="auto"></audio>
    <audio id="sound-u" src="sound/U.mp3" preload="auto"></audio>
    <audio id="sound-v" src="sound/V.mp3" preload="auto"></audio>
    <audio id="sound-w" src="sound/W.mp3" preload="auto"></audio>
    <audio id="sound-x" src="sound/X.mp3" preload="auto"></audio>
    <audio id="sound-y" src="sound/Y.mp3" preload="auto"></audio>
    <audio id="sound-z" src="sound/Z.mp3" preload="auto"></audio>


    <script>
        
        const welcomeScreen = document.getElementById('welcome-screen');
        const fruitIntroScreen = document.getElementById('fruit-intro-screen');
        const fruitGrid = document.getElementById('fruit-grid');
        const continueToGameBtn = document.getElementById('continueToGameBtn');
        const gameContainer = document.getElementById('game-container');
        const startButton = document.getElementById('startButton');
        const petunjukModal = document.getElementById('petunjukModal');
        const tujuanModal = document.getElementById('tujuanModal');
        const pustakaModal = document.getElementById('pustakaModal');
        const hcModal = document.getElementById('hcModal');
        const pengembangModal = document.getElementById('pengembangModal');
        const petunjukBtn = document.getElementById('petunjukBtn');
        const tujuanBtn = document.getElementById('tujuanBtn');
        const pustakaBtn = document.getElementById('pustakaBtn');
        const hcBtn = document.getElementById('hcBtn');
        const pengembangBtn = document.getElementById('pengembangBtn');
        const allCloseButtons = document.querySelectorAll('.close');
        const canvasWheel = document.getElementById('wheel');
        const ctxWheel = canvasWheel.getContext('2d');
        const spinBtn = document.getElementById('spinBtn');
        const animatedTextDisplay = document.getElementById('animated-text-display');
        const modal = document.getElementById("myModal");
        const gameArea = document.getElementById('game-area');
        const wordDisplayArea = document.getElementById('word-display-area');
        const roundDisplay = document.getElementById('round-display');
        const livesDisplay = document.getElementById('lives-display');
        const timerDiv = document.getElementById("timer");
        const timerProgress = document.getElementById("timerProgress");
        const alertMessageDiv = document.getElementById("alertMessage");
        const transitionAlert = document.getElementById('transition-alert');
        const transitionAlertContent = document.getElementById('transition-alert-content');
        const spinSound = document.getElementById('spinSound');
        const tickSound = document.getElementById('tickSound');
        const successSound = document.getElementById('successSound');
        const timeoutSound = document.getElementById('timeoutSound');
        const wrongSound = document.getElementById('wrongSound');
        const foundSound = document.getElementById('foundSound');
		const pairSound = document.getElementById('pairSound');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const musicToggleBtn = document.getElementById('musicToggleBtn');


        
        const segments = [
            { text: 'APEL', item: '🍎', benefitIcon: 'fa-heart', benefitSound: 'manfaat_apel' },
            { text: 'PISANG', item: '🍌', benefitIcon: 'fa-bolt', benefitSound: 'manfaat_pisang' },
            { text: 'WORTEL', item: '🥕', benefitIcon: 'fa-eye', benefitSound: 'manfaat_wortel' },
            { text: 'JERUK', item: '🍊', benefitIcon: 'fa-shield-alt', benefitSound: 'manfaat_jeruk' },
            { text: 'TOMAT', item: '🍅', benefitIcon: 'fa-leaf', benefitSound: 'manfaat_tomat' },
            { text: 'ANGGUR', item: '🍇', benefitIcon: 'fa-brain', benefitSound: 'manfaat_anggur' }
        ];

        const segmentColors = ["#f1c40f", "#e67e22", "#e74c3c", "#9b59b6", "#3498db", "#1abc9c"];
        const centerX = canvasWheel.width / 2;
        const centerY = canvasWheel.height / 2;
        const radius = canvasWheel.width / 2 - 10;
        let angle = 0;
        let spinning = false;
        let currentRound = 1;
        let currentSegment;
        let countdown;
        let letterInterval;

        
        let selectedWord = null;
        let selectedImage = null;
        let correctPairs_L2 = 0;

        
        let flippedCards = [];
        let matchedPairs_L3 = 0;
        let lockBoard = false;

        
        function spin() {
            if (spinning) return;
            spinning = true;
            spinSound.currentTime = 0; spinSound.play();
            const spinAngle = Math.random() * 360 + 720 * 5;
            const duration = 4000;
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                if (elapsed < duration) {
                    const progress = easeOutCubic(elapsed / duration);
                    angle = (progress * spinAngle * Math.PI) / 180;
                    drawWheel();
                    requestAnimationFrame(animate);
                } else {
                    spinning = false;
                    spinSound.pause();
                    const finalAngle = angle % (2 * Math.PI);
                    const arc = (2 * Math.PI) / segments.length;
                    const pointerAngle = (3 * Math.PI / 2 - finalAngle + 2 * Math.PI) % (2 * Math.PI);
                    const index = Math.floor(pointerAngle / arc);
                    currentSegment = segments[index];
                    currentRound = 1;
                    
                    const fruitSoundId = `sound-${currentSegment.text.toLowerCase()}`;
                    const fruitSound = document.getElementById(fruitSoundId);
                    if (fruitSound) {
                        fruitSound.currentTime = 0;
                        fruitSound.play();
                    }

					setTimeout(() => {
                                                
                        animateText(currentSegment.text, () => {
                            setTimeout(() => {
                                animatedTextDisplay.innerHTML = ''; 
                                startGame_Level1();
                            }, 2000); 
                        });

                    }, 2000); 

                }
            }
            animate();
        }

        
        function startGame_Level1() {
            prepareModalForLevel(1);
            let lives = 3;
            let lettersToGuess = currentSegment.text.split('');
            let guessedLettersCount = 0;
            updateInfoPanel(1, lives);
            setupWordDisplay_Level1();
            startTimer(60, () => endGame_Level1(false));
            letterInterval = setInterval(() => {
                createFallingLetter(lettersToGuess, (isCorrect) => {
                    if (isCorrect) {
                        guessedLettersCount++;
                        if (guessedLettersCount === currentSegment.text.length) {
                            endGame_Level1(true);
                        }
                    } else {
                        lives--;
                        updateInfoPanel(1, lives);
                        if (lives <= 0) {
                            endGame_Level1(false);
                        }
                    }
                });
            }, 1200);
        }

        function endGame_Level1(isWin) {
            resetAllIntervals();
            if (isWin) {
                successSound.currentTime = 0; successSound.play();
                showCustomAlert('info', `Selamat! Babak 1 Selesai.<br>Bersiap untuk Babak 2!`, 2000);
                setTimeout(startGame_Level2, 2100);
            } else {
                modal.style.display = "none";
                timeoutSound.currentTime = 0; timeoutSound.play();
                showCustomAlert('failure', `Anda Gagal! Kata yang benar: ${currentSegment.text}.<br>Putar roda untuk mencoba lagi.`);
            }
        }

        
        function startGame_Level2() {
            prepareModalForLevel(2);
            updateInfoPanel(2);
            setupMatchingGame();
            startTimer(60, () => endGame_Level2(false));
        }

        function endGame_Level2(isWin) {
            resetAllIntervals();
            if (isWin) {
                successSound.currentTime = 0; successSound.play();
                showCustomAlert('info', `Luar Biasa! Babak 2 Selesai.<br>Bersiap untuk Babak Final!`, 2000);
                setTimeout(startGame_Level3, 2100);
            } else {
                modal.style.display = "none";
                wrongSound.currentTime = 0; wrongSound.play();
                showCustomAlert('failure', `Waktu Habis!<br>Putar roda untuk mencoba lagi.`);
            }
        }

        
        function startGame_Level3() {
            prepareModalForLevel(3);
            updateInfoPanel(3);
            setupMemoryGame();
            startTimer(240, () => endGame_Level3(false));
        }

        function endGame_Level3(isWin) {
            resetAllIntervals();
            modal.style.display = "none"; 
            stopAllGameSounds(); 

            if (isWin) {
                
                successSound.currentTime = 0; successSound.play();
                createConfetti();
                showCustomAlert('success', `SELAMAT, KAMU HEBAT! KAMU TELAH MENYELESAIKAN SEMUA TANTANGAN.<br>KAMU HEBAT!`, 4000);
                
                
                setTimeout(() => {
                    hcModal.style.display = 'flex';
                    
                    
                    setTimeout(() => {
                        hcModal.style.display = 'none';
                        pengembangModal.style.display = 'flex';

                        
                        setTimeout(() => {
                            pengembangModal.style.display = 'none';
                            gameContainer.style.display = 'none';
                            welcomeScreen.style.display = 'flex';
                        }, 5000); 

                    }, 5000); 

                }, 4100); 

            } else {
                timeoutSound.currentTime = 0; timeoutSound.play();
                showCustomAlert('failure', `Waktu Habis!<br>Putar roda untuk mencoba lagi.`);
            }
        }

        
        
        
        function stopAllGameSounds() {
            
            document.querySelectorAll('audio[id^="sound-"]').forEach(audio => {
                if (!audio.paused) {
                    audio.pause();
                    audio.currentTime = 0;
                }
            });
        }

        function animateText(text, callback) {
            animatedTextDisplay.innerHTML = ''; 
            const letters = text.split('');
            let i = 0;
            const intervalTime = 350; 

            const interval = setInterval(() => {
                if (i < letters.length) {
                    const letter = letters[i];
                    animatedTextDisplay.innerHTML += letter;
                    const letterSound = document.getElementById(`sound-${letter.toLowerCase()}`);
                    if (letterSound) {
                        letterSound.currentTime = 0;
                        letterSound.play();
                    }
                    i++;
                } else {
                    clearInterval(interval);
                    if (callback) {
                        callback(); 
                    }
                }
            }, intervalTime); 
        }

        function prepareModalForLevel(level) {
            modal.style.display = "block";
            gameArea.innerHTML = '';
            wordDisplayArea.innerHTML = '';
            alertMessageDiv.innerHTML = '';
            livesDisplay.style.display = 'none';
            wordDisplayArea.style.display = 'none';

            if (level === 1) {
                gameArea.innerHTML = `<div id="current-object-image" style="font-size: 120px;">${currentSegment.item}</div>`; 
                alertMessageDiv.innerHTML = 'Tangkap huruf yang benar!';
                livesDisplay.style.display = 'block';
                wordDisplayArea.style.display = 'flex';
            } else if (level === 2) {
                alertMessageDiv.innerHTML = `Jodohkan kata dengan gambar yang benar!`;
            } else if (level === 3) {
                alertMessageDiv.innerHTML = 'Jodohkan buah dengan manfaatnya!';
            }
        }
        function updateInfoPanel(round, lives, time, initialDuration) {
            currentRound = round;
            roundDisplay.textContent = `Babak ${round}`;
            if (lives !== null && lives !== undefined) {
                livesDisplay.innerHTML = `NYAWA: ${'❤️'.repeat(lives)}`;
            }
            if (time !== undefined) {
                timerDiv.textContent = time;
                timerProgress.style.width = `${(time / initialDuration) * 100}%`;
            }
        }
        function setupWordDisplay_Level1() {
            wordDisplayArea.innerHTML = '';
            currentSegment.text.split('').forEach((_, i) => {
                const box = document.createElement('div');
                box.className = 'letter-box';
                box.dataset.letterIndex = i;
                wordDisplayArea.appendChild(box);
            });
        }
        function createFallingLetter(lettersToGuess, onResult) {
            const letter = document.createElement('div');
            letter.className = 'letter';
            const isCorrectLetter = Math.random() > 0.4;
            let char;
            let neededLetters = lettersToGuess.filter((val, i) => !wordDisplayArea.querySelector(`[data-letter-index='${i}']`).textContent);
            if (isCorrectLetter && neededLetters.length > 0) {
                char = neededLetters[Math.floor(Math.random() * neededLetters.length)];
            } else {
                char = String.fromCharCode(65 + Math.floor(Math.random() * 26));
            }
            letter.textContent = char;
            letter.style.left = `${Math.random() * (gameArea.clientWidth - 70)}px`; 
            const fallDuration = 10 + Math.random() * 4; 
            letter.style.animationDuration = `${fallDuration}s`;
            letter.addEventListener('click', () => {
                const letterSound = document.getElementById(`sound-${char.toLowerCase()}`);
                if (letterSound) {
                    letterSound.currentTime = 0;
                    letterSound.play();
                }

                let found = false;
                for (let i = 0; i < lettersToGuess.length; i++) {
                    const box = wordDisplayArea.querySelector(`[data-letter-index='${i}']`);
                    if (lettersToGuess[i] === char && box && box.textContent === '') {
                        box.textContent = char;
                        found = true;
                        onResult(true);
                        break;
                    }
                }
                if (!found) {
                    wrongSound.currentTime = 0;
                    wrongSound.play();
                    onResult(false);
                }
                letter.remove();
            });
            gameArea.appendChild(letter);
            setTimeout(() => { if (letter.parentElement) letter.remove(); }, fallDuration * 1000);
        }

        function setupMatchingGame() {
            selectedWord = null;
            selectedImage = null;
            correctPairs_L2 = 0;

            gameArea.innerHTML = `
                <div class="matching-container">
                    <div id="word-column" class="word-column"></div>
                    <div id="image-column" class="image-column"></div>
                </div>`;
            
            const gameItems = [...segments].sort(() => 0.5 - Math.random()).slice(0, 4);
            const words = [...gameItems].sort(() => 0.5 - Math.random());
            const images = [...gameItems].sort(() => 0.5 - Math.random());
            
            const wordColumn = document.getElementById('word-column');
            const imageColumn = document.getElementById('image-column');

            words.forEach(item => {
                const div = document.createElement('div');
                div.className = 'match-item word';
                div.textContent = item.text;
                div.dataset.id = item.text;
                div.addEventListener('click', handleMatchItemClick);
                wordColumn.appendChild(div);
            });

            images.forEach(item => {
                const div = document.createElement('div');
                div.className = 'match-item image';
                div.textContent = item.item;
                div.dataset.id = item.text;
                div.addEventListener('click', handleMatchItemClick);
                imageColumn.appendChild(div);
            });
        }

        function handleMatchItemClick(event) {
            const clickedItem = event.currentTarget;
            if (clickedItem.classList.contains('correct-pair')) return;

            stopAllGameSounds(); 
            const soundId = `sound-${clickedItem.dataset.id.toLowerCase()}`;
            const soundElement = document.getElementById(soundId);
            if (soundElement) {
                soundElement.currentTime = 0;
                soundElement.play();
            }

            if (clickedItem.classList.contains('word')) {
                if (selectedWord) selectedWord.classList.remove('selected');
                selectedWord = clickedItem;
                selectedWord.classList.add('selected');
            } else if (clickedItem.classList.contains('image')) {
                if (selectedImage) selectedImage.classList.remove('selected');
                selectedImage = clickedItem;
                selectedImage.classList.add('selected');
            }

            if (selectedWord && selectedImage) {
                if (selectedWord.dataset.id === selectedImage.dataset.id) {
                    pairSound.currentTime = 0;
                    pairSound.play();
                    
                    selectedWord.classList.add('correct-pair');
                    selectedImage.classList.add('correct-pair');
                    selectedWord.classList.remove('selected');
                    selectedImage.classList.remove('selected');

                    selectedWord = null;
                    selectedImage = null;
                    correctPairs_L2++;

                    if (correctPairs_L2 === 4) {
                        endGame_Level2(true);
                    }
                } else {
                    wrongSound.currentTime = 0;
                    wrongSound.play();
                    const tempWord = selectedWord;
                    const tempImage = selectedImage;
                    tempWord.classList.add('incorrect-pair');
                    tempImage.classList.add('incorrect-pair');
                    
                    document.querySelector('.matching-container').style.pointerEvents = 'none';

                    setTimeout(() => {
                        tempWord.classList.remove('selected', 'incorrect-pair');
                        tempImage.classList.remove('selected', 'incorrect-pair');
                         document.querySelector('.matching-container').style.pointerEvents = 'auto';
                    }, 500);
                    
                    selectedWord = null;
                    selectedImage = null;
                }
            }
        }

        function setupMemoryGame() {
            matchedPairs_L3 = 0;
            flippedCards = [];
            lockBoard = false;
            gameArea.innerHTML = '<div class="memory-game-container"></div>';
            const container = gameArea.querySelector('.memory-game-container');

            const gameItems = [...segments];
            const cards = [];
            gameItems.forEach(item => {
                cards.push({ type: 'fruit', id: item.text, content: item.item, sound: `sound-${item.text.toLowerCase()}` });
                cards.push({ type: 'benefit', id: item.text, content: `<i class="fas ${item.benefitIcon}"></i>`, sound: `sound-${item.benefitSound}` });
            });

            cards.sort(() => 0.5 - Math.random());

            cards.forEach(cardData => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.id = cardData.id;
                card.dataset.sound = cardData.sound;
                card.innerHTML = `
                    <div class="card-face card-front">?</div>
                    <div class="card-face card-back">${cardData.content}</div>
                `;
                card.addEventListener('click', handleCardClick);
                container.appendChild(card);
            });
        }

        function handleCardClick(event) {
            const clickedCard = event.currentTarget;
            if (lockBoard || flippedCards.length >= 2 || clickedCard.classList.contains('flipped')) return;

            stopAllGameSounds(); 

            
            

            const soundId = clickedCard.dataset.sound;
            const soundElement = document.getElementById(soundId);
            if (soundElement) {
                soundElement.currentTime = 0;
                soundElement.play();
            }

            clickedCard.classList.add('flipped');
            flippedCards.push(clickedCard);

            if (flippedCards.length === 2) {
                lockBoard = true;
                checkForMatch();
            }
        }

        function checkForMatch() {
            const [card1, card2] = flippedCards;
            if (card1.dataset.id === card2.dataset.id) {
                pairSound.currentTime = 0;
                pairSound.play();
                card1.classList.add('matched');
                card2.classList.add('matched');

                // FIX 1: Ganti '?' (di depan) menjadi '✓'
                card1.querySelector('.card-front').innerHTML = '<i class="fas fa-check"></i>';
                card2.querySelector('.card-front').innerHTML = '<i class="fas fa-check"></i>';
                
                // FIX 2: Hapus 'flipped' agar kartu kembali ke depan (menampilkan '✓')
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                
                // DIHAPUS: Baris ini (yang mengubah 'belakang' kartu)
                // card1.querySelector('.card-back').innerHTML = '<i class="fas fa-check"></i>';
                // card2.querySelector('.card-back').innerHTML = '<i class="fas fa-check"></i>';

                matchedPairs_L3++;
                flippedCards = [];
                lockBoard = false;
                if (matchedPairs_L3 === segments.length) {
                    endGame_Level3(true);
                }
            } else {
                wrongSound.currentTime = 0;
                wrongSound.play();
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                    lockBoard = false;
                }, 1000);
            }
        }

        function showCustomAlert(type, message, duration = 3000) {
            transitionAlertContent.innerHTML = message;
            transitionAlertContent.className = 'custom-alert-box';
            transitionAlertContent.classList.add(type);
            transitionAlert.classList.add('show');
            setTimeout(() => {
                transitionAlert.classList.remove('show');
            }, duration);
        }
        function startTimer(duration, onTimeout) {
            resetAllIntervals();
            let timeLeft = duration;
            const initialDuration = duration;
            updateInfoPanel(currentRound, null, timeLeft, initialDuration);
            countdown = setInterval(() => {
                timeLeft--;
                updateInfoPanel(currentRound, null, timeLeft, initialDuration);
                if (timeLeft <= 5 && timeLeft > 0) { tickSound.currentTime = 0; tickSound.play(); timerDiv.classList.add('flash'); }
                if (timeLeft <= 0) { onTimeout(); }
            }, 1000);
        }
        function resetAllIntervals() {
            clearInterval(countdown);
            clearInterval(letterInterval);
            timerDiv.classList.remove('flash');
            document.querySelectorAll('.letter').forEach(l => l.remove());
        }
        function drawWheel() {
            const arc = (2 * Math.PI) / segments.length;
            ctxWheel.clearRect(0,0,canvasWheel.width,canvasWheel.height);
            for (let i = 0; i < segments.length; i++) {
                const startAngle = angle + i * arc;
                const endAngle = startAngle + arc;
                ctxWheel.beginPath();
                ctxWheel.moveTo(centerX, centerY);
                ctxWheel.arc(centerX, centerY, radius, startAngle, endAngle);
                ctxWheel.closePath();
                ctxWheel.fillStyle = segmentColors[i];
                ctxWheel.fill();
                ctxWheel.strokeStyle = 'rgba(0,0,0,0.1)';
                ctxWheel.lineWidth = 4;
                ctxWheel.stroke();
                ctxWheel.save();
                ctxWheel.translate(centerX, centerY);
                ctxWheel.rotate(startAngle + arc / 2);
                const item = segments[i].item;
                if (item) {
                    ctxWheel.textAlign = 'center';
                    ctxWheel.textBaseline = 'middle';
                    ctxWheel.font = '80px Arial'; 
                    ctxWheel.fillText(item, radius * 0.7, 0);
                }
                ctxWheel.restore();
            }
        }
        function easeOutCubic(t) { return (--t) * t * t + 1; }

        function createConfetti() {
            const colors = ['#f44336', '#e91e63', '#9c27b0', '#2196f3', '#4CAF50', '#FFEB3B'];
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = `${Math.random() * 2 + 1}s`;
                document.body.appendChild(confetti);
                setTimeout(() => { confetti.remove(); }, 3000);
            }
        }

        function populateFruitGrid() {
            fruitGrid.innerHTML = ''; 
            segments.forEach(segment => {
                const card = document.createElement('div');
                card.className = 'fruit-card';
                card.innerHTML = `
                    <div class="fruit-emoji" data-sound="sound-${segment.text.toLowerCase()}">${segment.item}</div>
                    <div class="fruit-name">${segment.text}</div>
                    <div class="benefit-icon-container" data-sound="sound-${segment.benefitSound}">
                        <i class="fas ${segment.benefitIcon}"></i>
                    </div>
                `;
                
                card.querySelector('.fruit-emoji').addEventListener('click', (e) => {
                    e.stopPropagation();
                    stopAllGameSounds(); 
                    const soundId = e.currentTarget.dataset.sound;
                    const soundElement = document.getElementById(soundId);
                    if (soundElement) {
                        soundElement.currentTime = 0;
                        soundElement.play();
                    }
                });
                
                card.querySelector('.benefit-icon-container').addEventListener('click', (e) => {
                    e.stopPropagation();
                    stopAllGameSounds(); 
                    const soundId = e.currentTarget.dataset.sound;
                    const soundElement = document.getElementById(soundId);
                    if (soundElement) {
                        soundElement.currentTime = 0;
                        soundElement.play();
                    }
                });

                fruitGrid.appendChild(card);
            });
        }

        
        startButton.addEventListener('click', () => {
            welcomeScreen.style.display = 'none';
            fruitIntroScreen.style.display = 'flex';
            populateFruitGrid();

            
            if (backgroundMusic.paused) {
                backgroundMusic.play().catch(error => {
                    console.log("Autoplay musik dicegah oleh browser:", error);
                });
            }
        });

        continueToGameBtn.addEventListener('click', () => {
            fruitIntroScreen.style.display = 'none';
            gameContainer.style.display = 'flex';
        });

        petunjukBtn.addEventListener('click', () => { petunjukModal.style.display = 'flex'; });
        tujuanBtn.addEventListener('click', () => { tujuanModal.style.display = 'flex'; });
        pustakaBtn.addEventListener('click', () => { pustakaModal.style.display = 'flex'; });
        hcBtn.addEventListener('click', () => { hcModal.style.display = 'flex'; });
        pengembangBtn.addEventListener('click', () => { pengembangModal.style.display = 'flex'; });

        
        petunjukModal.addEventListener('click', (event) => {
            const target = event.target;
            if (target.classList.contains('petunjuk-icon')) {
                const soundId = target.dataset.sound;
                const soundElement = document.getElementById(soundId);
                if (soundElement) {
                    stopAllGameSounds(); 
                    
                    
                    soundElement.currentTime = 0;
                    soundElement.play();
                }
            }
        });

        allCloseButtons.forEach(button => {
            button.onclick = function() {
                let modalToClose = this.closest('.modal');
                if (modalToClose) {
                    modalToClose.style.display = "none";
                    stopAllGameSounds(); 
                     
                     
                }
                if (this.closest('#myModal')) {
                    resetAllIntervals();
                }
            }
        });

        spinBtn.addEventListener('click', spin);

        window.onclick = (event) => {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = "none";
                stopAllGameSounds(); 
                 
                 
                if (event.target.id === 'myModal') {
                    resetAllIntervals();
                }
            }
        };

        
        if (backgroundMusic) {
            backgroundMusic.volume = 0.2; 
        }

        musicToggleBtn.addEventListener('click', () => {
            if (backgroundMusic.paused) {
                backgroundMusic.play();
                musicToggleBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            } else {
                backgroundMusic.pause();
                musicToggleBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
            }
        });

        
        drawWheel();

    </script>
	
    <script>
        
        const bgCanvas = document.getElementById('backgroundCanvas');
        const bgCtx = bgCanvas.getContext('2d');

        function resizeBgCanvas() {
            bgCanvas.width = window.innerWidth;
            bgCanvas.height = window.innerHeight;
            drawBackground();
        }

        window.addEventListener('load', resizeBgCanvas);
        window.addEventListener('resize', resizeBgCanvas);

        const colors = {
            greenishGrey: '#A4C49F',
            yellow: '#F8D960',
            orange: '#FF9F5F',
            blueishGreen: '#8CC4C3'
        };

        function drawBackground() {
            const width = bgCanvas.width;
            const height = bgCanvas.height;

            bgCtx.fillStyle = colors.blueishGreen;
            bgCtx.fillRect(0, 0, width, height);

            bgCtx.fillStyle = colors.greenishGrey;
            bgCtx.beginPath();
            bgCtx.moveTo(0, 0);
            bgCtx.lineTo(width * 0.65, 0);
            bgCtx.quadraticCurveTo(width * 0.4, height * 0.3, width * 0.1, height);
            bgCtx.lineTo(0, height);
            bgCtx.closePath();
            bgCtx.fill();

            bgCtx.fillStyle = colors.yellow;
            bgCtx.beginPath();
            bgCtx.moveTo(width * 0.30, 0);
            bgCtx.lineTo(width * 0.90, 0);
            bgCtx.quadraticCurveTo(width * 0.8, height * 0.4, width * 0.05, height);
            bgCtx.lineTo(width * 0.05, height);
            bgCtx.closePath();
            bgCtx.fill();

            bgCtx.fillStyle = colors.orange;
            bgCtx.beginPath();
            bgCtx.moveTo(width * 0.70, 0);
            bgCtx.lineTo(width, 0);
            bgCtx.lineTo(width, height * 0.80);
            bgCtx.quadraticCurveTo(width * 0.7, height * 0.6, width * 0.40, height);
            bgCtx.closePath();
            bgCtx.fill();

            drawItems(); 
        }

        
        const fruitsAndVeggiesData = [
            { item: '🍎', size: 50, rot: 0, x: 0.06, y: 0.18 },
            { item: '🍌', size: 200, rot: -15, x: 0.20, y: 0.48 },
            { item: '🥕', size: 200, rot: 10, x: 0.40, y: 0.35 },
            { item: '🍇', size: 90, rot: -25, x: 0.50, y: 0.50 },
            { item: '🍊', size: 200, rot: 20, x: 0.55, y: 0.60 },
            { item: '🍓', size: 75, rot: -8, x: 0.35, y: 0.70 },
            { item: '🍉', size: 60, rot: 5, x: 0.85, y: 0.50 },
            { item: '🍍', size: 80, rot: 30, x: 0.85, y: 0.10 },
            { item: '🍅', size: 60, rot: 10, x: 0.40, y: 0.90 },
            { item: '🥑', size: 50, rot: 0, x: 0.65, y: 0.75 },
            { item: '🥦', size: 70, rot: 20, x: 0.25, y: 0.03 },
            { item: '🌽', size: 60, rot: -5, x: 0.70, y: 0.05 },
            { item: '🥝', size: 80, rot: 15, x: 0.18, y: 0.88 },
            { item: '🍑', size: 200, rot: -10, x: 0.90, y: 0.30 },
            { item: '🍒', size: 90, rot: 25, x: 0.02, y: 0.60 },
            { item: '🍋', size: 70, rot: 0, x: 0.50, y: 0.15 },
            { item: '🍆', size: 65, rot: -20, x: 0.95, y: 0.55 },
            { item: '🥥', size: 75, rot: 10, x: 0.30, y: 0.92 },
            { item: '🥭', size: 150, rot: -15, x: 0.70, y: 0.95 },
            { item: '🍐', size: 60, rot: 30, x: 0.10, y: 0.30 },
        ];

        
        function drawItems() {
            fruitsAndVeggiesData.forEach(data => {
                const x = bgCanvas.width * data.x;
                const y = bgCanvas.height * data.y;

                bgCtx.save();
                bgCtx.translate(x, y);
                bgCtx.rotate(data.rot * Math.PI / 180);
                bgCtx.font = `${data.size}px Arial`;

                bgCtx.shadowColor = 'rgba(0, 0, 0, 0.4)';
                bgCtx.shadowBlur = 5;
                bgCtx.shadowOffsetX = 3;
                bgCtx.shadowOffsetY = 3;

                bgCtx.fillText(data.item, 0, 0);

                bgCtx.restore();
            });
        }
    </script>
	<script>
        
        const profilePicContainer = document.querySelector('.profile-pic-container');
        if (profilePicContainer) {
            const profilePic = profilePicContainer.querySelector('img');
            const maxRotate = 25; 

            profilePicContainer.addEventListener('mousemove', (e) => {
                const rect = profilePicContainer.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;

                
                const rotateY = ((mouseX / rect.width) - 0.5) * 2 * maxRotate;
                const rotateX = (((mouseY / rect.height) - 0.5) * 2 * maxRotate) * -1;

                
                profilePic.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.1)`;
            });

            profilePicContainer.addEventListener('mouseleave', () => {
                
                profilePic.style.transform = 'rotateX(0deg) rotateY(0deg) scale(1)';
            });
        }
    </script>
</body>
</html>


